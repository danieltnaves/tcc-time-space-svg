<html>
<head>
	<script type="application/javascript" src="js/Angle.js"></script>
	<script type="application/javascript" src="js/Point.js"></script>
	<script type="application/javascript" src="js/Line.js"></script>
	<script type="application/javascript" src="js/Circle.js"></script>
	<script type="application/javascript" src="js/Polygon.js"></script>	
	<script type="application/javascript" src="js/Canvas.js"></script>
	<script type="application/javascript" src="js/HyperbolicCanvas.js"></script>
	<style type="text/css">
		html, body {
			height: 100%;
			margin: 0;
			background-color: #2C001E;
		}

		div#hyperbolic-canvas {
			height: 100%;
			width: 100%;
		}

		div#hyperbolic-canvas div.backdrop {
			background-color: #2C001E;
		}

		div#hyperbolic-canvas div.backdrop div.underlay {
			background-color: #D6D3CF;
		}
	</style>

</head>
<body>
	<div id="hyperbolic-canvas" style="width: 600px; height: 600px;">
		
	</div>

	<script type="text/javascript">		

		var drawNetElement = function (canvas, location) {
			var defaultProperties = {
				lineDash: [],
				lineJoin: 'round',
				lineWidth: 1,
				shadowBlur: 20,
				shadowColor: 'white',
				strokeStyle: '#DD4814',
				fillStyle: '#DD4814',
			};

			var heading = HyperbolicCanvas.Angle.fromDegrees(90);
			var wingAngle = Math.TAU / 3;
			canvas.setContextProperties(defaultProperties);			

			var front =  location.hyperbolicDistantPoint(.1, heading);
			var left  = location.hyperbolicDistantPoint(.05, heading + wingAngle);
			var right = location.hyperbolicDistantPoint(.05, heading - wingAngle);
			path = canvas.pathForHyperbolic(HyperbolicCanvas.Polygon.givenVertices([
				front,
				left,
				location,
				right,
				]));
			canvas.stroke(path);
		};

		var drawLineBetweenPoints = function(canvas, p1, p2, strokeWidth) {
			canvas.setContextProperties({
				lineWidth: strokeWidth == null ? 1 : strokeWidth,
				lineJoin: 'round',
				lineDash: [],
				path2D: true
			});
			//var line = HyperbolicCanvas.Line.givenTwoPoints(p1, p2);
			var line = new HyperbolicCanvas.Line({
				p0: p1,
				p1: p2,
				euclideanUnitCircleIntersects: [p1, p2],
				idealPoints: [p1, p2]
			});
			var path = canvas.pathForHyperbolic(line);
			canvas.stroke(path);
			return line;
		};

		(function() {			
			var canvas = HyperbolicCanvas.create('#hyperbolic-canvas', 'main-canvas');
			/*canvas.setContextProperties({ fillStyle: '#DD4814' });
			canvas.clear();		
			var point1 = HyperbolicCanvas.Point.givenCoordinates(0.25, 0.25);
			var point2 = HyperbolicCanvas.Point.givenCoordinates(0.55, 0.55);
			var line = HyperbolicCanvas.Line.givenTwoPoints(point1, point2);
			var path = canvas.pathForHyperbolic(line);
			canvas.stroke(path);*/
			
			var p1 = new HyperbolicCanvas.Point.givenCoordinates(0.25, 0.25);
			console.log(p1);
			drawNetElement(canvas, p1);
			var p2 = new HyperbolicCanvas.Point({
				x: 0.50, 
				y: 0.50,
				angle: HyperbolicCanvas.Angle.random()
			});
			drawNetElement(canvas, p2);
			var l1 = drawLineBetweenPoints(canvas, p1, p2, 4);
			var p3 = new HyperbolicCanvas.Point({
				x: 0.20, 
				y: 0.20,
				angle: HyperbolicCanvas.Angle.random()
			});
			drawNetElement(canvas, p3);
			var l2 = drawLineBetweenPoints(canvas, p2, p3);
			
			/*var a0 = HyperbolicCanvas.Angle.random();
			console.log('a0: ' + a0);
			var a1 = HyperbolicCanvas.Angle.random();
			console.log('a1: ' + a1);
			var l3 = HyperbolicCanvas.Line.givenAnglesOfIdealPoints(a0, a1);
			console.log(l3);
			canvas.stroke(canvas.pathForHyperbolic(l3));*/

		})();
	</script>
</body>
</html>